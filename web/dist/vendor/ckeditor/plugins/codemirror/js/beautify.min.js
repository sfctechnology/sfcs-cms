!function(){function t(t,n){return new e(t,n).beautify()}function e(t,e){var n,i,s,_,r,a,o,h,l,c,u,f,d,T,p,g,K,E;function A(t,e){return{mode:e,last_text:t?t.last_text:"",last_word:t?t.last_word:"",var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,multiline_array:!1,if_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:t?t.indentation_level+(t.var_line&&t.var_line_reindented?1:0):0,ternary_depth:0}}function O(t){for(t=void 0!==t&&t;D.length&&(" "===D[D.length-1]||D[D.length-1]===G||D[D.length-1]===at||t&&("\n"===D[D.length-1]||"\r"===D[D.length-1]));)D.pop()}function x(t){return t.replace(/^\s\s*|\s\s*$/,"")}function m(){return D.length&&"\n"===D[D.length-1]}function v(t){if(t=void 0!==t&&t,n&&!t){var e;t:{for(0>(e=D.length-1)&&(e+=D.length),e>D.length-1&&(e=D.length-1),e++;0<e--;)if(e in D&&"\n"===D[e])break t;e=-1}(e+=1)<D.length&&D.slice(e).join("").length+U.length+(nt?1:0)>=n&&(t=!0)}(i&&tt||t)&&!m()&&(N(!1,!0),et=!0,tt=!1)}function N(t,e){if(et=!1,nt=!1,!e&&";"!==X.last_text)for(;X.mode===T&&!X.if_block;)S();X.mode===p&&(X.multiline_array=!0),D.length&&(t||!m())&&D.push("\n")}function y(t){if(void 0===t?t=1:"number"!=typeof t&&(t=t?1:0),""!==X.last_text)for(var e=0;e<t;e+=1)D.push(G)}function b(t){if(t=t||U,m()&&(s&&X.mode===p&&_t.length?D.push(_t.join("")+""):(at&&D.push(at),y(X.indentation_level),y(X.var_line&&X.var_line_reindented),y(et))),et=!1,nt&&D.length){var e=D[D.length-1];m()||" "===e||e===G||D.push(" ")}nt=!1,D.push(t)}function R(t){X?(F.push(X),z=X):z=A(null,t),X=A(z,t)}function k(t){return L(t,[g,K,E])}function S(){0<F.length&&(z=X,X=F.pop())}function C(){var t;return"do"===X.last_text||"else"===X.last_text&&"if"!==U||"TK_END_EXPR"===B&&(z.mode===K||z.mode===E)?(v(),R(T),X.indentation_level+=1,et=!1,t=!0):t=!1,t}function w(t){return L(t,"case return do if throw else".split(" "))}function L(t,e){for(var n=0;n<e.length;n+=1)if(e[n]===t)return!0;return!1}function I(t){for(var e=Z,n=M.charAt(e);L(n,Q)&&n!==t;){if(++e>=it)return!1;n=M.charAt(e)}return n===t}function P(){var t,e,n,i,s;if(st=0,Z>=it)return["","TK_EOF"];for(tt=!1,_t=[],e=M.charAt(Z),Z+=1;L(e,Q);){if("\n"===e?(st+=1,_t=[]):st&&(e===G?_t.push(G):"\r"!==e&&_t.push(" ")),Z>=it)return["","TK_EOF"];e=M.charAt(Z),Z+=1}if(L(e,$)){if(Z<it)for(;L(M.charAt(Z),$)&&(e+=M.charAt(Z),(Z+=1)!==it););return Z===it||!e.match(/^[0-9]+[Ee]$/)||"-"!==M.charAt(Z)&&"+"!==M.charAt(Z)?"in"===e?[e,"TK_OPERATOR"]:[e,"TK_WORD"]:(n=M.charAt(Z),Z+=1,[e+=n+(i=P())[0],"TK_WORD"])}if("("===e||"["===e)return[e,"TK_START_EXPR"];if(")"===e||"]"===e)return[e,"TK_END_EXPR"];if("{"===e)return[e,"TK_START_BLOCK"];if("}"===e)return[e,"TK_END_BLOCK"];if(";"===e)return[e,"TK_SEMICOLON"];if("/"===e){if(n="",i=!0,"*"===M.charAt(Z)){if((Z+=1)<it)for(;Z<it&&("*"!==M.charAt(Z)||!M.charAt(Z+1)||"/"!==M.charAt(Z+1))&&(n+=e=M.charAt(Z),("\n"===e||"\r"===e)&&(i=!1),!((Z+=1)>=it)););return Z+=2,i&&0===st?["/*"+n+"*/","TK_INLINE_COMMENT"]:["/*"+n+"*/","TK_BLOCK_COMMENT"]}if("/"===M.charAt(Z)){for(n=e;"\r"!==M.charAt(Z)&&"\n"!==M.charAt(Z)&&(n+=M.charAt(Z),!((Z+=1)>=it)););return[n,"TK_COMMENT"]}}if("'"===e||'"'===e||("/"===e||_&&"<"===e&&M.slice(Z-1).match(/^<[a-zA-Z:0-9]+\s*([a-zA-Z:0-9]+="[^"]*"\s*)*\/?\s*>/))&&("TK_WORD"===B&&w(X.last_text)||"TK_END_EXPR"===B&&L(z.mode,[E,K])||L(B,"TK_COMMENT TK_START_EXPR TK_START_BLOCK TK_END_BLOCK TK_OPERATOR TK_EQUALS TK_EOF TK_SEMICOLON TK_COMMA".split(" ")))){n=e;var a=i=!1;if(t=e,Z<it)if("/"===n){for(s=!1;i||s||M.charAt(Z)!==n;)if(t+=M.charAt(Z),i?i=!1:(i="\\"===M.charAt(Z),"["===M.charAt(Z)?s=!0:"]"===M.charAt(Z)&&(s=!1)),(Z+=1)>=it)return[t,"TK_STRING"]}else if(_&&"<"===n){e=/<(\/?)([a-zA-Z:0-9]+)\s*([a-zA-Z:0-9]+="[^"]*"\s*)*(\/?)\s*>/g,i=M.slice(Z-1);var o=e.exec(i);if(o&&0===o.index){for(n=o[2],t=0;o;){a=!!o[1];var h=!!o[o.length-1];if(o[2]!==n||h||(a?--t:++t),0>=t)break;o=e.exec(i)}return s=o?o.index+o[0].length:i.length,Z+=s-1,[i.slice(0,s),"TK_STRING"]}}else for(;i||M.charAt(Z)!==n;)if(t+=M.charAt(Z),i?(("x"===M.charAt(Z)||"u"===M.charAt(Z))&&(a=!0),i=!1):i="\\"===M.charAt(Z),(Z+=1)>=it)return[t,"TK_STRING"];if(Z+=1,t+=n,a&&r){t:{for(s=t,e=!1,i="",o=0,t="",a=0;e||o<s.length;)if(h=s.charAt(o),o++,e){if(e=!1,"x"===h)t=s.substr(o,2),o+=2;else{if("u"!==h){i+="\\"+h;continue}t=s.substr(o,4),o+=4}if(!t.match(/^[0123456789abcdefABCDEF]+$/))break t;if(0<=(a=parseInt(t,16))&&32>a)i+="x"===h?"\\x"+t:"\\u"+t;else if(34===a||39===a||92===a)i+="\\"+String.fromCharCode(a);else{if("x"===h&&126<a&&255>=a)break t;i+=String.fromCharCode(a)}}else"\\"===h?e=!0:i+=h;s=i}t=s}if("/"===n)for(;Z<it&&L(M.charAt(Z),$);)t+=M.charAt(Z),Z+=1;return[t,"TK_STRING"]}if("#"===e){if(0===D.length&&"!"===M.charAt(Z)){for(t=e;Z<it&&"\n"!==e;)t+=e=M.charAt(Z),Z+=1;return[x(t)+"\n","TK_UNKNOWN"]}if(n="#",Z<it&&L(M.charAt(Z),H)){do{n+=e=M.charAt(Z),Z+=1}while(Z<it&&"#"!==e&&"="!==e);return"#"===e||("["===M.charAt(Z)&&"]"===M.charAt(Z+1)?(n+="[]",Z+=2):"{"===M.charAt(Z)&&"}"===M.charAt(Z+1)&&(n+="{}",Z+=2)),[n,"TK_WORD"]}}if("<"===e&&"\x3c!--"===M.substring(Z-1,Z+3)){for(Z+=3,e="\x3c!--";"\n"!==M.charAt(Z)&&Z<it;)e+=M.charAt(Z),Z++;return X.in_html_comment=!0,[e,"TK_COMMENT"]}if("-"===e&&X.in_html_comment&&"--\x3e"===M.substring(Z-1,Z+2))return X.in_html_comment=!1,Z+=2,["--\x3e","TK_COMMENT"];if("."===e)return[e,"TK_DOT"];if(L(e,Y)){for(;Z<it&&L(e+M.charAt(Z),Y)&&(e+=M.charAt(Z),!((Z+=1)>=it)););return","===e?[e,"TK_COMMA"]:"="===e?[e,"TK_EQUALS"]:[e,"TK_OPERATOR"]}return[e,"TK_UNKNOWN"]}var M,D,U,j,B,W,G,X,z,F,Q,$,Y,Z,q,H,J,V,tt,et,nt,it,st,_t,rt,at="";for(Q=["\n","\r","\t"," "],$="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),H="0123456789".split(""),Y="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",Y=(Y+=" <%= <% %> <?= <? ?>").split(" "),q="continue try throw return var if switch case default for while break function".split(" "),T="Statement",p="ArrayLiteral",K="ForInitializer",E="Conditional",g="Expression",rt={TK_START_EXPR:function(){if(C(),"["===U){if("TK_WORD"===B||")"===X.last_text)return L(X.last_text,q)&&(nt=!0),R(g),b(),void(a&&(nt=!0));X.mode===p&&("["===X.last_text||","===X.last_text&&("]"===W||"}"===W))&&(s||N())}else"for"===X.last_text?R(K):L(X.last_text,["if","while"])?R(E):R(g);";"===X.last_text||"TK_START_BLOCK"===B?N():"TK_END_EXPR"===B||"TK_START_EXPR"===B||"TK_END_BLOCK"===B||"."===X.last_text?tt&&N():"TK_WORD"!==B&&"TK_OPERATOR"!==B?nt=!0:"function"===X.last_word||"typeof"===X.last_word?o&&(nt=!0):(L(X.last_text,q)||"catch"===X.last_text)&&h&&(nt=!0),"("===U&&("TK_EQUALS"===B||"TK_OPERATOR"===B)&&"ObjectLiteral"!==X.mode&&v(),b(),a&&(nt=!0),"["===U&&(R(p),X.indentation_level+=1),V&&(V=!1,X.indentation_level+=1)},TK_END_EXPR:function(){for(;X.mode===T;)S();"]"===U&&X.mode===p&&X.multiline_array&&!s&&N(),S(),a&&(nt=!0),b(),X.do_while&&z.mode===E&&(z.mode=g,X.do_block=!1,X.do_while=!1)},TK_START_BLOCK:function(){R("BlockStatement");var t=I("}")&&"function"===X.last_word&&"TK_END_EXPR"===B;"expand"===l?"TK_OPERATOR"!==B&&(t||"TK_EQUALS"===B||w(X.last_text)&&"else"!==X.last_text)?nt=!0:N():"TK_OPERATOR"!==B&&"TK_START_EXPR"!==B?"TK_START_BLOCK"===B?N():nt=!0:z.mode===p&&","===X.last_text&&("}"===W?nt=!0:N()),b(),X.indentation_level+=1},TK_END_BLOCK:function(){for(;X.mode===T;)S();S();var t="TK_START_BLOCK"===B;"expand"===l?t||N():t||(X.mode===p&&s?(s=!1,N(),s=!0):N()),b()},TK_WORD:function(){if(C()||tt&&!k(X.mode)&&("TK_OPERATOR"!==B||"--"===X.last_text||"++"===X.last_text)&&"TK_EQUALS"!==B&&(i||"var"!==X.last_text)&&N(),X.do_block&&!X.do_while){if("while"===U)return nt=!0,b(),nt=!0,void(X.do_while=!0);N(),X.do_block=!1}if(V&&w(U)&&(V=!1),X.if_block&&"else"!==U){for(;X.mode===T;)S();X.if_block=!1}"function"===U?(X.var_line&&"TK_EQUALS"!==B&&(X.var_line_reindented=!0),(m()||";"===X.last_text||"}"===X.last_text)&&"{"!==X.last_text&&X.mode!==p&&(m()||N(!0),m()&&0<D.length-1&&"\n"===D[D.length-2]||N(!0)),"TK_WORD"===B?"get"===X.last_text||"set"===X.last_text||"new"===X.last_text||"return"===X.last_text?nt=!0:N():"TK_OPERATOR"===B||"="===X.last_text?nt=!0:k(X.mode)||N(),b(),X.last_word=U):"case"===U||"default"===U&&X.in_case_statement?(N(),(X.case_body||o)&&(X.indentation_level--,X.case_body=!1),b(),X.in_case=!0,X.in_case_statement=!0):(J="NONE","TK_END_BLOCK"===B?L(U,["else","catch","finally"])?"expand"===l||"end-expand"===l?J="NEWLINE":(J="SPACE",nt=!0):J="NEWLINE":"TK_SEMICOLON"===B&&"BlockStatement"===X.mode?J="NEWLINE":"TK_SEMICOLON"===B&&k(X.mode)?J="SPACE":"TK_STRING"===B?J="NEWLINE":"TK_WORD"===B?J="SPACE":"TK_START_BLOCK"===B?J="NEWLINE":"TK_END_EXPR"===B&&(nt=!0,J="NEWLINE"),L(U,q)&&")"!==X.last_text&&(J="else"===X.last_text?"SPACE":"NEWLINE"),("TK_COMMA"===B||"TK_START_EXPR"===B||"TK_EQUALS"===B||"TK_OPERATOR"===B)&&"ObjectLiteral"!==X.mode&&v(),L(U,["else","catch","finally"])?"TK_END_BLOCK"!==B||"expand"===l||"end-expand"===l?N():(O(!0),"}"!==D[D.length-1]&&N(),nt=!0):"NEWLINE"===J?w(X.last_text)?nt=!0:"TK_END_EXPR"!==B?("TK_START_EXPR"!==B||"var"!==U)&&":"!==X.last_text&&("if"===U&&"else"===X.last_word&&"{"!==X.last_text?nt=!0:(X.var_line=!1,X.var_line_reindented=!1,N())):L(U,q)&&")"!==X.last_text&&(X.var_line=!1,X.var_line_reindented=!1,N()):X.mode===p&&","===X.last_text&&"}"===W?N():"SPACE"===J&&(nt=!0),b(),X.last_word=U,"var"===U&&(X.var_line=!0,X.var_line_reindented=!1,X.var_line_tainted=!1),"do"===U&&(X.do_block=!0),"if"===U&&(X.if_block=!0))},TK_SEMICOLON:function(){for(;X.mode===T&&!X.if_block;)S();b(),X.var_line=!1,X.var_line_reindented=!1,"ObjectLiteral"===X.mode&&(X.mode="BlockStatement")},TK_STRING:function(){C()||"TK_WORD"===B?nt=!0:"TK_COMMA"===B||"TK_START_EXPR"===B||"TK_EQUALS"===B||"TK_OPERATOR"===B?"ObjectLiteral"!==X.mode&&v():N(),b()},TK_EQUALS:function(){X.var_line&&(X.var_line_tainted=!0),nt=!0,b(),nt=!0},TK_OPERATOR:function(){var t=!0,e=!0;w(X.last_text)?(nt=!0,b()):"*"!==U||"TK_DOT"!==B||W.match(/^\d+$/)?":"===U&&X.in_case?(X.case_body=!0,X.indentation_level+=1,b(),N(),X.in_case=!1):"::"===U?b():(tt&&("--"===U||"++"===U)&&N(),L(U,["--","++","!"])||L(U,["-","+"])&&(L(B,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||L(X.last_text,q)||","===X.last_text)?(t=!1,e=!1,";"===X.last_text&&k(X.mode)&&(t=!0),"TK_WORD"===B&&L(X.last_text,q)&&(t=!0),("BlockStatement"===X.mode||X.mode===T)&&("{"===X.last_text||";"===X.last_text)&&N()):":"===U?0===X.ternary_depth?("BlockStatement"===X.mode&&(X.mode="ObjectLiteral"),t=!1):X.ternary_depth-=1:"?"===U&&(X.ternary_depth+=1),nt=nt||t,b(),nt=e):b()},TK_COMMA:function(){X.var_line?((k(X.mode)||"TK_END_BLOCK"===B)&&(X.var_line_tainted=!1),X.var_line&&(X.var_line_reindented=!0),b(),X.var_line_tainted?(X.var_line_tainted=!1,N()):nt=!0):"TK_END_BLOCK"===B&&X.mode!==g?(b(),"ObjectLiteral"===X.mode&&"}"===X.last_text?N():nt=!0):"ObjectLiteral"===X.mode?(b(),N()):(b(),nt=!0)},TK_BLOCK_COMMENT:function(){for(var t,e,n=[],i=(t=(t=U).replace(/\x0d/g,"")).indexOf("\n");-1!==i;)n.push(t.substring(0,i)),i=(t=t.substring(i+1)).indexOf("\n");t.length&&n.push(t);t:{for(n=(t=n).slice(1),i=0;i<n.length;i++)if("*"!==(e=x(n[i])).charAt(0)){e=!1;break t}e=!0}if(e)for(N(!1,!0),b(t[0]),e=1;e<t.length;e++)N(!1,!0),b(" "+x(t[e]));else for(1<t.length||"TK_END_BLOCK"===B?N(!1,!0):nt=!0,b(t[0]),D.push("\n"),e=1;e<t.length;e++)D.push(t[e]),D.push("\n");I("\n")||N(!1,!0)},TK_INLINE_COMMENT:function(){nt=!0,b(),nt=!0},TK_COMMENT:function(){tt?N(!1,!0):O(!0),nt=!0,b(),N(!1,!0)},TK_DOT:function(){w(X.last_text)?nt=!0:v(")"===X.last_text&&c),m()&&(V=!0),b()},TK_UNKNOWN:function(){b(),"\n"===U[U.length-1]&&N()}},u=c=l=h=o=a=r=_=s=i=n=void 0,void 0!==(e=e||{}).space_after_anon_function&&void 0===e.jslint_happy&&(e.jslint_happy=e.space_after_anon_function),void 0!==e.braces_on_own_line&&(l=e.braces_on_own_line?"expand":"collapse"),"expand-strict"===(l=e.brace_style?e.brace_style:l||"collapse")&&(l="expand"),u=e.indent_size?parseInt(e.indent_size,10):4,f=e.indent_char?e.indent_char:" ",i=void 0===e.preserve_newlines||e.preserve_newlines,c=void 0!==e.break_chained_methods&&e.break_chained_methods,d=void 0===e.max_preserve_newlines?0:parseInt(e.max_preserve_newlines,10),a=void 0!==e.space_in_paren&&e.space_in_paren,o=void 0!==e.jslint_happy&&e.jslint_happy,s=void 0!==e.keep_array_indentation&&e.keep_array_indentation,h=void 0===e.space_before_conditional||e.space_before_conditional,r=void 0!==e.unescape_strings&&e.unescape_strings,n=void 0===e.wrap_line_length?0:parseInt(e.wrap_line_length,10),_=void 0!==e.e4x&&e.e4x,G="";0<u;)G+=f,u-=1;for(;t&&(" "===t.charAt(0)||"\t"===t.charAt(0));)at+=t.charAt(0),t=t.substring(1);M=t,it=t.length,B="TK_START_BLOCK",W="",D=[],nt=et=!1,_t=[],F=[],R("BlockStatement"),Z=0,this.beautify=function(){for(var t,e;t=P(),U=t[0],"TK_EOF"!==(j=t[1]);){if(s&&X.mode===p)for(e=0;e<st;e+=1)N(!0);else if(tt=0<st,d&&st>d&&(st=d),i&&1<st)for(N(),e=1;e<st;e+=1)N(!0);rt[j](),"TK_INLINE_COMMENT"!==j&&"TK_COMMENT"!==j&&"TK_UNKNOWN"!==j&&(W=X.last_text,B=j,X.last_text=U)}return at+D.join("").replace(/[\r\n ]+$/,"")}}"function"==typeof define?define((function(e,n){n.js_beautify=t})):"undefined"!=typeof exports?exports.js_beautify=t:"undefined"!=typeof window?window.js_beautify=t:"undefined"!=typeof global&&(global.js_beautify=t)}(),function(){function t(t,e,n,i){var s,_,r,a,o,h,l,c,u,f,d;for(_=(e=e||{}).indent_size||4,r=e.indent_char||" ",o=e.brace_style||"collapse",a=0===e.max_char?1/0:e.max_char||250,h=e.unformatted||"a span bdo em strong dfn code samp kbd var cite abbr acronym q sub sup tt i b big small u s strike font ins del pre address dt h1 h2 h3 h4 h5 h6".split(" "),(s=new function(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.Utils={whitespace:["\n","\r","\t"," "],single_token:"br input link meta !doctype basefont base area hr wbr param img isindex ?xml embed ?php ? ?=".split(" "),extra_liners:["head","body","/html"],in_array:function(t,e){for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1}},this.get_content=function(){for(var t="",e=[],n=!1;"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return e.length?e.join(""):["","TK_EOF"];if(t=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(t,this.Utils.whitespace))e.length&&(n=!0),this.line_char_count--;else{if(n){if(this.line_char_count>=this.max_char){for(e.push("\n"),n=0;n<this.indent_level;n++)e.push(this.indent_string);this.line_char_count=0}else e.push(" "),this.line_char_count++;n=!1}e.push(t)}}return e.length?e.join(""):""},this.get_contents_to=function(t){var e,n;return this.pos===this.input.length?["","TK_EOF"]:((t=RegExp("</"+t+"\\s*>","igm")).lastIndex=this.pos,n=(e=t.exec(this.input))?e.index:this.input.length,this.pos<n&&(this.input.substring(this.pos,n),this.pos=n),"")},this.record_tag=function(t){this.tags[t+"count"]?(this.tags[t+"count"]++,this.tags[t+this.tags[t+"count"]]=this.indent_level):(this.tags[t+"count"]=1,this.tags[t+this.tags[t+"count"]]=this.indent_level),this.tags[t+this.tags[t+"count"]+"parent"]=this.tags.parent,this.tags.parent=t+this.tags[t+"count"]},this.retrieve_tag=function(t){if(this.tags[t+"count"]){for(var e=this.tags.parent;e&&t+this.tags[t+"count"]!==e;)e=this.tags[e+"parent"];e&&(this.indent_level=this.tags[t+this.tags[t+"count"]],this.tags.parent=this.tags[e+"parent"]),delete this.tags[t+this.tags[t+"count"]+"parent"],delete this.tags[t+this.tags[t+"count"]],1===this.tags[t+"count"]?delete this.tags[t+"count"]:this.tags[t+"count"]--}},this.get_tag=function(t){var e,n,i,s,_,r="",a=[],o="",l=!1,c=this.pos,u=this.line_char_count;t=void 0!==t&&t;do{if(this.pos>=this.input.length)return t&&(this.pos=c,this.line_char_count=u),a.length?a.join(""):["","TK_EOF"];r=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(r,this.Utils.whitespace)?(l=!0,this.line_char_count--):(("'"===r||'"'===r)&&(a[1]&&"!"===a[1]||(r+=this.get_unformatted(r),l=!0)),"="===r&&(l=!1),a.length&&"="!==a[a.length-1]&&">"!==r&&l&&(this.line_char_count>=this.max_char?(this.print_newline(!1,a),this.line_char_count=0):(a.push(" "),this.line_char_count++),l=!1),"<"===r&&(e=this.pos-1),a.push(r))}while(">"!==r);return s=-1!==(i=a.join("")).indexOf(" ")?i.indexOf(" "):i.indexOf(">"),_=i.substring(1,s).toLowerCase(),"/"===i.charAt(i.length-2)||this.Utils.in_array(_,this.Utils.single_token)?t||(this.tag_type="SINGLE"):"script"===_?t||(this.record_tag(_),this.tag_type="SCRIPT"):"style"===_?t||(this.record_tag(_),this.tag_type="STYLE"):this.is_unformatted(_,h)?(o=this.get_unformatted("</"+_+">",i),a.push(o),0<e&&this.Utils.in_array(this.input.charAt(e-1),this.Utils.whitespace)&&a.splice(0,0,this.input.charAt(e-1)),n=this.pos-1,this.Utils.in_array(this.input.charAt(n+1),this.Utils.whitespace)&&a.push(this.input.charAt(n+1)),this.tag_type="SINGLE"):"!"===_.charAt(0)?-1!==_.indexOf("[if")?(-1!==i.indexOf("!IE")&&(o=this.get_unformatted("--\x3e",i),a.push(o)),t||(this.tag_type="START")):-1!==_.indexOf("[endif")?(this.tag_type="END",this.unindent()):-1!==_.indexOf("[cdata[")?(o=this.get_unformatted("]]>",i),a.push(o),t||(this.tag_type="SINGLE")):(o=this.get_unformatted("--\x3e",i),a.push(o),this.tag_type="SINGLE"):t||("/"===_.charAt(0)?(this.retrieve_tag(_.substring(1)),this.tag_type="END"):(this.record_tag(_),this.tag_type="START"),this.Utils.in_array(_,this.Utils.extra_liners)&&this.print_newline(!0,this.output)),t&&(this.pos=c,this.line_char_count=u),a.join("")},this.get_unformatted=function(t,e){if(e&&-1!==e.toLowerCase().indexOf(t))return"";var n="",i="",s=!0;do{if(this.pos>=this.input.length)break;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!s){this.line_char_count--;continue}if("\n"===n||"\r"===n){i+="\n",this.line_char_count=0;continue}}i+=n,this.line_char_count++,s=!0}while(-1===i.toLowerCase().indexOf(t));return i},this.get_token=function(){var t,e;return"TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token?(e=this.last_token.substr(7),"string"!=typeof(t=this.get_contents_to(e))?t:[t,"TK_"+e]):"CONTENT"===this.current_mode?"string"!=typeof(t=this.get_content())?t:[t,"TK_CONTENT"]:"TAG"===this.current_mode?"string"!=typeof(t=this.get_tag())?t:[t,"TK_TAG_"+this.tag_type]:void 0},this.get_full_indent=function(t){return 1>(t=this.indent_level+t||0)?"":Array(t+1).join(this.indent_string)},this.is_unformatted=function(t,e){if(!this.Utils.in_array(t,e))return!1;if("a"!==t.toLowerCase()||!this.Utils.in_array("a",e))return!0;var n=(this.get_tag(!0)||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!(n&&!this.Utils.in_array(n,e))},this.printer=function(t,e,n,i,s){for(this.input=t||"",this.output=[],this.indent_character=e,this.indent_string="",this.indent_size=n,this.brace_style=s,this.indent_level=0,this.max_char=i,t=this.line_char_count=0;t<this.indent_size;t++)this.indent_string+=this.indent_character;this.print_newline=function(t,e){if(this.line_char_count=0,e&&e.length){if(!t)for(;this.Utils.in_array(e[e.length-1],this.Utils.whitespace);)e.pop();e.push("\n");for(var n=0;n<this.indent_level;n++)e.push(this.indent_string)}},this.print_token=function(t){this.output.push(t)},this.indent=function(){this.indent_level++},this.unindent=function(){0<this.indent_level&&this.indent_level--}},this}).printer(t,r,_,a,o);l=s.get_token(),s.token_text=l[0],s.token_type=l[1],"TK_EOF"!==s.token_type;){switch(s.token_type){case"TK_TAG_START":s.print_newline(!1,s.output),s.print_token(s.token_text),s.indent(),s.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":s.print_newline(!1,s.output),s.print_token(s.token_text),s.current_mode="CONTENT";break;case"TK_TAG_END":"TK_CONTENT"===s.last_token&&""===s.last_text&&(c=s.token_text.match(/\w+/)[0],(null===(u=s.output[s.output.length-1].match(/<\s*(\w+)/))||u[1]!==c)&&s.print_newline(!0,s.output)),s.print_token(s.token_text),s.current_mode="CONTENT";break;case"TK_TAG_SINGLE":(t=s.token_text.match(/^\s*<([a-z]+)/i))&&s.Utils.in_array(t[1],h)||s.print_newline(!1,s.output),s.print_token(s.token_text),s.current_mode="CONTENT";break;case"TK_CONTENT":""!==s.token_text&&s.print_token(s.token_text),s.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":""!==s.token_text&&(s.output.push("\n"),t=s.token_text,d=1,"TK_SCRIPT"===s.token_type?f="function"==typeof n&&n:"TK_STYLE"===s.token_type&&(f="function"==typeof i&&i),"keep"===e.indent_scripts?d=0:"separate"===e.indent_scripts&&(d=-s.indent_level),_=s.get_full_indent(d),f?t=f(t.replace(/^\s*/,_),e):(r=t.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(s.indent_string).length-1,r=s.get_full_indent(d-r),t=t.replace(/^\s*/,_).replace(/\r\n|\r|\n/g,"\n"+r).replace(/\s*$/,"")),t&&(s.print_token(t),s.print_newline(!0,s.output))),s.current_mode="TAG"}s.last_token=s.token_type,s.last_text=s.token_text}return s.output.join("")}if("function"==typeof define)define((function(e,n){var i=e("./beautify.js").js_beautify,s=e("./beautify-css.js").css_beautify;n.html_beautify=function(e,n){return t(e,n,i,s)}}));else if("undefined"!=typeof exports){var e=require("./beautify.js").js_beautify,n=require("./beautify-css.js").css_beautify;exports.html_beautify=function(i,s){return t(i,s,e,n)}}else"undefined"!=typeof window?window.html_beautify=function(e,n){return t(e,n,window.js_beautify,window.css_beautify)}:"undefined"!=typeof global&&(global.html_beautify=function(e,n){return t(e,n,global.js_beautify,global.css_beautify)})}();